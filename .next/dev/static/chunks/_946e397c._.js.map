{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/header.tsx"],"sourcesContent":["import { User, Droplets, Upload } from \"lucide-react\"\n\ninterface HeaderProps {\n  onUploadCsv?: () => void\n  isUploading?: boolean\n}\n\nexport function Header({ onUploadCsv, isUploading }: HeaderProps) {\n  return (\n    <header className=\"h-14 border-b border-gray-200 flex items-center px-4 bg-white shrink-0\">\n      <div className=\"absolute left-1/2 -translate-x-1/2 flex items-center gap-2\">\n        <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-sm\">\n          <Droplets className=\"w-4 h-4 text-white\" />\n        </div>\n        <span className=\"text-xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent\">\n          GidroAtlas\n        </span>\n      </div>\n\n      <nav className=\"flex items-center gap-0.5 text-xs font-medium\">\n        <a href=\"#\" className=\"px-2.5 py-1.5 text-blue-600 bg-blue-50 rounded-md\">\n          Карта\n        </a>\n        <a\n          href=\"#\"\n          className=\"px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors\"\n        >\n          Отчёты\n        </a>\n        <a\n          href=\"#\"\n          className=\"px-2.5 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors\"\n        >\n          Аналитика\n        </a>\n      </nav>\n\n      <div className=\"ml-auto flex items-center gap-3 text-xs\">\n        <button\n          onClick={onUploadCsv}\n          disabled={isUploading}\n          className=\"flex items-center gap-1.5 px-3 py-1.5 text-blue-600 border border-blue-200 rounded-md hover:bg-blue-50 transition-colors disabled:opacity-60\"\n        >\n          <Upload className=\"w-3.5 h-3.5\" />\n          {isUploading ? \"Загрузка...\" : \"CSV\"}\n        </button>\n        <a href=\"#\" className=\"text-gray-600 hover:text-gray-900 font-medium transition-colors\">\n          Справка\n        </a>\n        <button className=\"flex items-center gap-1.5 px-3 py-1.5 text-white font-medium bg-blue-600 rounded-md hover:bg-blue-700 transition-colors\">\n          <User className=\"w-3.5 h-3.5\" />\n          Войти\n        </button>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;;;AAOO,SAAS,OAAO,EAAE,WAAW,EAAE,WAAW,EAAe;IAC9D,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,yNAAQ;4BAAC,WAAU;;;;;;;;;;;kCAEtB,6LAAC;wBAAK,WAAU;kCAA6F;;;;;;;;;;;;0BAK/G,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAoD;;;;;;kCAG1E,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;kCAGD,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;0BAKH,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;;0CAEV,6LAAC,mNAAM;gCAAC,WAAU;;;;;;4BACjB,cAAc,gBAAgB;;;;;;;kCAEjC,6LAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAkE;;;;;;kCAGxF,6LAAC;wBAAO,WAAU;;0CAChB,6LAAC,6MAAI;gCAAC,WAAU;;;;;;4BAAgB;;;;;;;;;;;;;;;;;;;AAM1C;KAjDgB"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/filter-bar.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { Search, ChevronDown, X, AlertTriangle, Droplets, Waves, Database } from \"lucide-react\"\nimport type { Filters } from \"@/lib/types\"\nimport { useState, useRef, useEffect } from \"react\"\n\nconst regions = [\n  \"Ташкентская область\",\n  \"Самаркандская область\",\n  \"Бухарская область\",\n  \"Ферганская область\",\n  \"Андижанская область\",\n  \"Наманганская область\",\n  \"Хорезмская область\",\n  \"Сурхандарьинская область\",\n  \"Кашкадарьинская область\",\n  \"Навоийская область\",\n  \"Джизакская область\",\n  \"Сырдарьинская область\",\n]\n\nconst resourceTypes = [\n  { value: \"lake\", label: \"Озеро\", icon: Droplets },\n  { value: \"canal\", label: \"Канал\", icon: Waves },\n  { value: \"reservoir\", label: \"Водохранилище\", icon: Database },\n]\n\nconst waterTypes = [\n  { value: \"fresh\", label: \"Пресная\" },\n  { value: \"saline\", label: \"Непресная\" },\n]\n\nconst conditions = [\n  { value: 1, label: \"1 - Отличное\", color: \"bg-emerald-500\" },\n  { value: 2, label: \"2 - Хорошее\", color: \"bg-lime-500\" },\n  { value: 3, label: \"3 - Удовлетв.\", color: \"bg-amber-400\" },\n  { value: 4, label: \"4 - Плохое\", color: \"bg-orange-500\" },\n  { value: 5, label: \"5 - Критич.\", color: \"bg-red-500\" },\n]\n\ninterface FilterBarProps {\n  filters: Filters\n  onFiltersChange: (filters: Filters) => void\n  onShowCritical: () => void\n}\n\nexport function FilterBar({ filters, onFiltersChange, onShowCritical }: FilterBarProps) {\n  const activeFiltersCount = Object.values(filters).filter((v) => v !== \"\" && v !== null && v !== false).length\n\n  const clearFilters = () => {\n    onFiltersChange({\n      region: \"\",\n      resourceType: \"\",\n      waterType: \"\",\n      hasFauna: null,\n      passportDateFrom: \"\",\n      passportDateTo: \"\",\n      condition: null,\n      priority: \"\",\n      criticalOnly: false,\n    })\n  }\n\n  return (\n    <div className=\"h-12 border-b border-gray-200 flex items-center px-3 gap-2 bg-white\">\n      <div className=\"relative w-64 group\">\n        <input\n          type=\"text\"\n          placeholder=\"Поиск...\"\n          className=\"w-full h-8 pl-8 pr-3 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all\"\n        />\n        <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400\" />\n      </div>\n\n      <div className=\"w-px h-6 bg-gray-200\" />\n\n      <FilterDropdownWithIcons\n        label=\"Тип\"\n        value={filters.resourceType}\n        options={resourceTypes}\n        onChange={(v) => onFiltersChange({ ...filters, resourceType: v })}\n      />\n\n      <FilterDropdown\n        label=\"Область\"\n        value={filters.region}\n        options={regions.map((r) => ({ value: r, label: r }))}\n        onChange={(v) => onFiltersChange({ ...filters, region: v })}\n      />\n\n      <FilterDropdown\n        label=\"Вода\"\n        value={filters.waterType}\n        options={waterTypes}\n        onChange={(v) => onFiltersChange({ ...filters, waterType: v })}\n      />\n\n      <FilterDropdown\n        label=\"Состояние\"\n        value={filters.condition?.toString() || \"\"}\n        options={conditions.map((c) => ({ value: c.value.toString(), label: c.label }))}\n        onChange={(v) => onFiltersChange({ ...filters, condition: v ? Number.parseInt(v) : null })}\n        showConditionColors\n      />\n\n      <button\n        onClick={onShowCritical}\n        className={`h-8 px-3 flex items-center gap-1.5 rounded-lg border text-xs font-medium transition-all ${\n          filters.criticalOnly\n            ? \"border-red-500 bg-red-500 text-white\"\n            : \"border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n        }`}\n      >\n        <AlertTriangle className=\"w-3.5 h-3.5\" />\n        Критические\n      </button>\n\n      <div className=\"flex-1\" />\n\n      {activeFiltersCount > 0 && (\n        <button\n          onClick={clearFilters}\n          className=\"h-8 px-2 flex items-center gap-1 text-xs text-gray-600 hover:text-red-600 transition-colors\"\n        >\n          <X className=\"w-3.5 h-3.5\" />\n          Сброс ({activeFiltersCount})\n        </button>\n      )}\n    </div>\n  )\n}\n\ninterface FilterDropdownWithIconsProps {\n  label: string\n  value: string\n  options: { value: string; label: string; icon: React.ComponentType<{ className?: string }> }[]\n  onChange: (value: string) => void\n}\n\nfunction FilterDropdownWithIcons({ label, value, options, onChange }: FilterDropdownWithIconsProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const ref = useRef<HTMLDivElement>(null)\n  const selectedOption = options.find((o) => o.value === value)\n  const isActive = value !== \"\"\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  const SelectedIcon = selectedOption?.icon\n\n  return (\n    <div ref={ref} className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`h-8 px-3 flex items-center gap-1.5 rounded-lg border text-xs font-medium transition-all ${\n          isActive\n            ? \"border-blue-500 bg-blue-50 text-blue-700\"\n            : \"border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n        }`}\n      >\n        {SelectedIcon && <SelectedIcon className=\"w-3.5 h-3.5\" />}\n        {selectedOption?.label || label}\n        <ChevronDown className={`w-3 h-3 transition-transform ${isOpen ? \"rotate-180\" : \"\"}`} />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 mt-1 min-w-[160px] bg-white border border-gray-200 rounded-lg shadow-xl z-50 py-1 overflow-hidden\">\n          <button\n            onClick={() => {\n              onChange(\"\")\n              setIsOpen(false)\n            }}\n            className=\"w-full px-3 py-2 text-left text-xs text-gray-500 hover:bg-gray-50 transition-colors\"\n          >\n            Все типы\n          </button>\n          {options.map((opt) => {\n            const Icon = opt.icon\n            return (\n              <button\n                key={opt.value}\n                onClick={() => {\n                  onChange(opt.value)\n                  setIsOpen(false)\n                }}\n                className={`w-full px-3 py-2 text-left text-xs hover:bg-gray-50 flex items-center gap-2 transition-colors ${\n                  value === opt.value ? \"bg-blue-50 text-blue-700\" : \"text-gray-700\"\n                }`}\n              >\n                <Icon className={`w-3.5 h-3.5 ${value === opt.value ? \"text-blue-600\" : \"text-gray-500\"}`} />\n                {opt.label}\n              </button>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n\ninterface FilterDropdownProps {\n  label: string\n  value: string\n  options: { value: string; label: string }[]\n  onChange: (value: string) => void\n  showConditionColors?: boolean\n}\n\nfunction FilterDropdown({ label, value, options, onChange, showConditionColors }: FilterDropdownProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const ref = useRef<HTMLDivElement>(null)\n  const selectedOption = options.find((o) => o.value === value)\n  const isActive = value !== \"\"\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  const getConditionColor = (val: string) => {\n    const colors: Record<string, string> = {\n      \"1\": \"bg-emerald-500\",\n      \"2\": \"bg-lime-500\",\n      \"3\": \"bg-amber-400\",\n      \"4\": \"bg-orange-500\",\n      \"5\": \"bg-red-500\",\n    }\n    return colors[val] || \"\"\n  }\n\n  return (\n    <div ref={ref} className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`h-8 px-3 flex items-center gap-1.5 rounded-lg border text-xs font-medium transition-all ${\n          isActive\n            ? \"border-blue-500 bg-blue-50 text-blue-700\"\n            : \"border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n        }`}\n      >\n        {showConditionColors && value && <span className={`w-2.5 h-2.5 rounded-full ${getConditionColor(value)}`} />}\n        {selectedOption?.label || label}\n        <ChevronDown className={`w-3 h-3 transition-transform ${isOpen ? \"rotate-180\" : \"\"}`} />\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute top-full left-0 mt-1 min-w-[180px] bg-white border border-gray-200 rounded-lg shadow-xl z-50 py-1 max-h-56 overflow-auto\">\n          <button\n            onClick={() => {\n              onChange(\"\")\n              setIsOpen(false)\n            }}\n            className=\"w-full px-3 py-2 text-left text-xs text-gray-500 hover:bg-gray-50 transition-colors\"\n          >\n            Все\n          </button>\n          {options.map((opt) => (\n            <button\n              key={opt.value}\n              onClick={() => {\n                onChange(opt.value)\n                setIsOpen(false)\n              }}\n              className={`w-full px-3 py-2 text-left text-xs hover:bg-gray-50 flex items-center gap-2 transition-colors ${\n                value === opt.value ? \"bg-blue-50 text-blue-700\" : \"text-gray-700\"\n              }`}\n            >\n              {showConditionColors && <span className={`w-2.5 h-2.5 rounded-full ${getConditionColor(opt.value)}`} />}\n              {opt.label}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;AALA;;;AAOA,MAAM,UAAU;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAM,gBAAgB;IACpB;QAAE,OAAO;QAAQ,OAAO;QAAS,MAAM,yNAAQ;IAAC;IAChD;QAAE,OAAO;QAAS,OAAO;QAAS,MAAM,gNAAK;IAAC;IAC9C;QAAE,OAAO;QAAa,OAAO;QAAiB,MAAM,yNAAQ;IAAC;CAC9D;AAED,MAAM,aAAa;IACjB;QAAE,OAAO;QAAS,OAAO;IAAU;IACnC;QAAE,OAAO;QAAU,OAAO;IAAY;CACvC;AAED,MAAM,aAAa;IACjB;QAAE,OAAO;QAAG,OAAO;QAAgB,OAAO;IAAiB;IAC3D;QAAE,OAAO;QAAG,OAAO;QAAe,OAAO;IAAc;IACvD;QAAE,OAAO;QAAG,OAAO;QAAiB,OAAO;IAAe;IAC1D;QAAE,OAAO;QAAG,OAAO;QAAc,OAAO;IAAgB;IACxD;QAAE,OAAO;QAAG,OAAO;QAAe,OAAO;IAAa;CACvD;AAQM,SAAS,UAAU,EAAE,OAAO,EAAE,eAAe,EAAE,cAAc,EAAkB;IACpF,MAAM,qBAAqB,OAAO,MAAM,CAAC,SAAS,MAAM,CAAC,CAAC,IAAM,MAAM,MAAM,MAAM,QAAQ,MAAM,OAAO,MAAM;IAE7G,MAAM,eAAe;QACnB,gBAAgB;YACd,QAAQ;YACR,cAAc;YACd,WAAW;YACX,UAAU;YACV,kBAAkB;YAClB,gBAAgB;YAChB,WAAW;YACX,UAAU;YACV,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;;;;;;kCAEZ,6LAAC,mNAAM;wBAAC,WAAU;;;;;;;;;;;;0BAGpB,6LAAC;gBAAI,WAAU;;;;;;0BAEf,6LAAC;gBACC,OAAM;gBACN,OAAO,QAAQ,YAAY;gBAC3B,SAAS;gBACT,UAAU,CAAC,IAAM,gBAAgB;wBAAE,GAAG,OAAO;wBAAE,cAAc;oBAAE;;;;;;0BAGjE,6LAAC;gBACC,OAAM;gBACN,OAAO,QAAQ,MAAM;gBACrB,SAAS,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC;wBAAE,OAAO;wBAAG,OAAO;oBAAE,CAAC;gBACnD,UAAU,CAAC,IAAM,gBAAgB;wBAAE,GAAG,OAAO;wBAAE,QAAQ;oBAAE;;;;;;0BAG3D,6LAAC;gBACC,OAAM;gBACN,OAAO,QAAQ,SAAS;gBACxB,SAAS;gBACT,UAAU,CAAC,IAAM,gBAAgB;wBAAE,GAAG,OAAO;wBAAE,WAAW;oBAAE;;;;;;0BAG9D,6LAAC;gBACC,OAAM;gBACN,OAAO,QAAQ,SAAS,EAAE,cAAc;gBACxC,SAAS,WAAW,GAAG,CAAC,CAAC,IAAM,CAAC;wBAAE,OAAO,EAAE,KAAK,CAAC,QAAQ;wBAAI,OAAO,EAAE,KAAK;oBAAC,CAAC;gBAC7E,UAAU,CAAC,IAAM,gBAAgB;wBAAE,GAAG,OAAO;wBAAE,WAAW,IAAI,OAAO,QAAQ,CAAC,KAAK;oBAAK;gBACxF,mBAAmB;;;;;;0BAGrB,6LAAC;gBACC,SAAS;gBACT,WAAW,CAAC,wFAAwF,EAClG,QAAQ,YAAY,GAChB,yCACA,2DACJ;;kCAEF,6LAAC,4OAAa;wBAAC,WAAU;;;;;;oBAAgB;;;;;;;0BAI3C,6LAAC;gBAAI,WAAU;;;;;;YAEd,qBAAqB,mBACpB,6LAAC;gBACC,SAAS;gBACT,WAAU;;kCAEV,6LAAC,oMAAC;wBAAC,WAAU;;;;;;oBAAgB;oBACrB;oBAAmB;;;;;;;;;;;;;AAKrC;KApFgB;AA6FhB,SAAS,wBAAwB,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAgC;;IAChG,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,MAAM,IAAA,uKAAM,EAAiB;IACnC,MAAM,iBAAiB,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK;IACvD,MAAM,WAAW,UAAU;IAE3B,IAAA,0KAAS;6CAAC;YACR,SAAS,mBAAmB,KAAiB;gBAC3C,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;oBAC9D,UAAU;gBACZ;YACF;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;qDAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QACzD;4CAAG,EAAE;IAEL,MAAM,eAAe,gBAAgB;IAErC,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAU;;0BACvB,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAW,CAAC,wFAAwF,EAClG,WACI,6CACA,2DACJ;;oBAED,8BAAgB,6LAAC;wBAAa,WAAU;;;;;;oBACxC,gBAAgB,SAAS;kCAC1B,6LAAC,sOAAW;wBAAC,WAAW,CAAC,6BAA6B,EAAE,SAAS,eAAe,IAAI;;;;;;;;;;;;YAGrF,wBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;4BACP,SAAS;4BACT,UAAU;wBACZ;wBACA,WAAU;kCACX;;;;;;oBAGA,QAAQ,GAAG,CAAC,CAAC;wBACZ,MAAM,OAAO,IAAI,IAAI;wBACrB,qBACE,6LAAC;4BAEC,SAAS;gCACP,SAAS,IAAI,KAAK;gCAClB,UAAU;4BACZ;4BACA,WAAW,CAAC,8FAA8F,EACxG,UAAU,IAAI,KAAK,GAAG,6BAA6B,iBACnD;;8CAEF,6LAAC;oCAAK,WAAW,CAAC,YAAY,EAAE,UAAU,IAAI,KAAK,GAAG,kBAAkB,iBAAiB;;;;;;gCACxF,IAAI,KAAK;;2BAVL,IAAI,KAAK;;;;;oBAapB;;;;;;;;;;;;;AAKV;GAlES;MAAA;AA4ET,SAAS,eAAe,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,mBAAmB,EAAuB;;IACnG,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,MAAM,IAAA,uKAAM,EAAiB;IACnC,MAAM,iBAAiB,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK;IACvD,MAAM,WAAW,UAAU;IAE3B,IAAA,0KAAS;oCAAC;YACR,SAAS,mBAAmB,KAAiB;gBAC3C,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;oBAC9D,UAAU;gBACZ;YACF;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;4CAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QACzD;mCAAG,EAAE;IAEL,MAAM,oBAAoB,CAAC;QACzB,MAAM,SAAiC;YACrC,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;QACP;QACA,OAAO,MAAM,CAAC,IAAI,IAAI;IACxB;IAEA,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAU;;0BACvB,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAW,CAAC,wFAAwF,EAClG,WACI,6CACA,2DACJ;;oBAED,uBAAuB,uBAAS,6LAAC;wBAAK,WAAW,CAAC,yBAAyB,EAAE,kBAAkB,QAAQ;;;;;;oBACvG,gBAAgB,SAAS;kCAC1B,6LAAC,sOAAW;wBAAC,WAAW,CAAC,6BAA6B,EAAE,SAAS,eAAe,IAAI;;;;;;;;;;;;YAGrF,wBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;4BACP,SAAS;4BACT,UAAU;wBACZ;wBACA,WAAU;kCACX;;;;;;oBAGA,QAAQ,GAAG,CAAC,CAAC,oBACZ,6LAAC;4BAEC,SAAS;gCACP,SAAS,IAAI,KAAK;gCAClB,UAAU;4BACZ;4BACA,WAAW,CAAC,8FAA8F,EACxG,UAAU,IAAI,KAAK,GAAG,6BAA6B,iBACnD;;gCAED,qCAAuB,6LAAC;oCAAK,WAAW,CAAC,yBAAyB,EAAE,kBAAkB,IAAI,KAAK,GAAG;;;;;;gCAClG,IAAI,KAAK;;2BAVL,IAAI,KAAK;;;;;;;;;;;;;;;;;AAiB5B;IAxES;MAAA"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport function getConditionColor(condition: number): string {\n  const colors: Record<number, string> = {\n    1: \"bg-green-500\",\n    2: \"bg-lime-500\",\n    3: \"bg-yellow-500\",\n    4: \"bg-orange-500\",\n    5: \"bg-red-500\",\n  }\n  return colors[condition] || \"bg-gray-500\"\n}\n\nexport function getConditionLabel(condition: number): string {\n  const labels: Record<number, string> = {\n    1: \"Отличное состояние\",\n    2: \"Хорошее состояние\",\n    3: \"Удовлетворительное состояние\",\n    4: \"Плохое состояние\",\n    5: \"Критическое состояние\",\n  }\n  return labels[condition] || \"Неизвестно\"\n}\n\nexport function getResourceTypeLabel(type: string): string {\n  const labels: Record<string, string> = {\n    lake: \"Озеро\",\n    canal: \"Канал\",\n    reservoir: \"Водохранилище\",\n  }\n  return labels[type] || type\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS,kBAAkB,SAAiB;IACjD,MAAM,SAAiC;QACrC,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;IACL;IACA,OAAO,MAAM,CAAC,UAAU,IAAI;AAC9B;AAEO,SAAS,kBAAkB,SAAiB;IACjD,MAAM,SAAiC;QACrC,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;IACL;IACA,OAAO,MAAM,CAAC,UAAU,IAAI;AAC9B;AAEO,SAAS,qBAAqB,IAAY;IAC/C,MAAM,SAAiC;QACrC,MAAM;QACN,OAAO;QACP,WAAW;IACb;IACA,OAAO,MAAM,CAAC,KAAK,IAAI;AACzB"}},
    {"offset": {"line": 679, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/object-list.tsx"],"sourcesContent":["\"use client\"\n\nimport { Heart, GitCompare, ChevronDown, Droplets, Waves, Database, Fish } from \"lucide-react\"\nimport type { WaterObject, SortOption } from \"@/lib/types\"\nimport { getResourceTypeLabel } from \"@/lib/utils\"\nimport { useState, useRef, useEffect } from \"react\"\n\ninterface ObjectListProps {\n  objects: WaterObject[]\n  selectedId?: string\n  hoveredId?: string | null\n  onSelect: (object: WaterObject) => void\n  onHover: (id: string | null) => void\n  sortBy: SortOption\n  onSortChange: (sort: SortOption) => void\n  compareObjects: WaterObject[]\n  onToggleCompare: (obj: WaterObject) => void\n  onOpenCompare: () => void\n}\n\nconst sortOptions: { value: SortOption; label: string }[] = [\n  { value: \"dangerous\", label: \"Сначала опасные\" },\n  { value: \"safe\", label: \"Сначала безопасные\" },\n  { value: \"oldest\", label: \"Старые паспорта\" },\n  { value: \"newest\", label: \"Новые паспорта\" },\n]\n\nexport function ObjectList({\n  objects,\n  selectedId,\n  hoveredId,\n  onSelect,\n  onHover,\n  sortBy,\n  onSortChange,\n  compareObjects,\n  onToggleCompare,\n  onOpenCompare,\n}: ObjectListProps) {\n  const [showSortMenu, setShowSortMenu] = useState(false)\n  const sortRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (sortRef.current && !sortRef.current.contains(event.target as Node)) {\n        setShowSortMenu(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  return (\n    <div className=\"w-96 border-l border-gray-200 flex flex-col bg-white shrink-0\">\n      <div className=\"p-3 border-b border-gray-100\">\n        <h2 className=\"text-base font-semibold text-gray-900\">Водные ресурсы</h2>\n        <div className=\"flex items-center justify-between mt-1\">\n          <p className=\"text-xs text-gray-500\">{objects.length} объектов</p>\n\n          {/* Сортировка */}\n          <div className=\"relative\" ref={sortRef}>\n            <button\n              onClick={() => setShowSortMenu(!showSortMenu)}\n              className=\"text-xs text-gray-600 hover:text-gray-900 flex items-center gap-1\"\n            >\n              <span className=\"font-medium\">{sortOptions.find((s) => s.value === sortBy)?.label}</span>\n              <ChevronDown className=\"w-3 h-3\" />\n            </button>\n            {showSortMenu && (\n              <div className=\"absolute top-full right-0 mt-1 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50 py-1\">\n                {sortOptions.map((opt) => (\n                  <button\n                    key={opt.value}\n                    onClick={() => {\n                      onSortChange(opt.value)\n                      setShowSortMenu(false)\n                    }}\n                    className={`w-full px-3 py-1.5 text-left text-xs hover:bg-gray-50 transition-colors ${\n                      sortBy === opt.value ? \"bg-blue-50 text-blue-700\" : \"text-gray-700\"\n                    }`}\n                  >\n                    {opt.label}\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Кнопка сравнения */}\n        {compareObjects.length > 0 && (\n          <button\n            onClick={onOpenCompare}\n            className=\"mt-2 w-full h-8 flex items-center justify-center gap-2 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <GitCompare className=\"w-3.5 h-3.5\" />\n            Сравнить ({compareObjects.length})\n          </button>\n        )}\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-3 space-y-3\">\n        {objects.map((obj) => (\n          <ObjectListCard\n            key={obj.id}\n            object={obj}\n            isSelected={obj.id === selectedId}\n            isHovered={obj.id === hoveredId}\n            isInCompare={compareObjects.some((o) => o.id === obj.id)}\n            onClick={() => onSelect(obj)}\n            onMouseEnter={() => onHover(obj.id)}\n            onMouseLeave={() => onHover(null)}\n            onToggleCompare={() => onToggleCompare(obj)}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\ninterface ObjectListCardProps {\n  object: WaterObject\n  isSelected: boolean\n  isHovered: boolean\n  isInCompare: boolean\n  onClick: () => void\n  onMouseEnter: () => void\n  onMouseLeave: () => void\n  onToggleCompare: () => void\n}\n\nfunction getConditionBgColor(condition: number): string {\n  const colors: Record<number, string> = {\n    1: \"bg-emerald-500\",\n    2: \"bg-lime-500\",\n    3: \"bg-amber-400\",\n    4: \"bg-orange-500\",\n    5: \"bg-red-500\",\n  }\n  return colors[condition] || \"bg-gray-500\"\n}\n\nfunction ResourceTypeIcon({ type, className = \"\" }: { type: string; className?: string }) {\n  switch (type) {\n    case \"lake\":\n      return <Droplets className={className} />\n    case \"canal\":\n      return <Waves className={className} />\n    case \"reservoir\":\n      return <Database className={className} />\n    default:\n      return <Droplets className={className} />\n  }\n}\n\nfunction ObjectListCard({\n  object,\n  isSelected,\n  isHovered,\n  isInCompare,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  onToggleCompare,\n}: ObjectListCardProps) {\n  const conditionBgColor = getConditionBgColor(object.condition)\n\n  return (\n    <div\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      className={`flex gap-3 p-2 rounded-lg cursor-pointer transition-all ${\n        isSelected ? \"bg-blue-50 ring-1 ring-blue-500\" : isHovered ? \"bg-gray-50\" : \"hover:bg-gray-50\"\n      }`}\n    >\n      {/* Изображение */}\n      <div className=\"relative w-24 h-20 rounded-lg overflow-hidden shrink-0\">\n        <img\n          src={object.image || \"/placeholder.svg?height=80&width=100&query=water resource\"}\n          alt={object.name}\n          className=\"w-full h-full object-cover\"\n        />\n        <div\n          className={`absolute top-1 left-1 w-5 h-5 rounded-full ${conditionBgColor} text-white text-[10px] font-bold flex items-center justify-center`}\n        >\n          {object.condition}\n        </div>\n        <button\n          onClick={(e) => {\n            e.stopPropagation()\n            onToggleCompare()\n          }}\n          className={`absolute top-1 right-1 w-5 h-5 rounded-full flex items-center justify-center transition-colors ${\n            isInCompare ? \"bg-blue-600 text-white\" : \"bg-white/90 text-gray-500 hover:text-red-500\"\n          }`}\n        >\n          <Heart className={`w-3 h-3 ${isInCompare ? \"fill-current\" : \"\"}`} />\n        </button>\n      </div>\n\n      {/* Контент */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center gap-1.5 mb-0.5\">\n          <ResourceTypeIcon type={object.resourceType} className=\"w-3.5 h-3.5 text-blue-600\" />\n          <span className=\"text-[10px] text-gray-500\">{getResourceTypeLabel(object.resourceType)}</span>\n          {object.hasFauna && <Fish className=\"w-3 h-3 text-green-500\" />}\n        </div>\n        <h3 className=\"text-sm font-semibold text-gray-900 truncate\">{object.name}</h3>\n        <p className=\"text-[10px] text-gray-500 truncate\">{object.region}</p>\n        <div className=\"flex items-center gap-2 mt-1\">\n          <span className={`px-1.5 py-0.5 rounded text-[10px] font-medium text-white ${conditionBgColor}`}>\n            {object.condition <= 2 ? \"Норма\" : object.condition <= 3 ? \"Внимание\" : \"Критично\"}\n          </span>\n          <span className=\"text-[10px] text-gray-400\">{object.waterType === \"fresh\" ? \"Пресная\" : \"Солёная\"}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1078, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/map-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef } from \"react\"\nimport type { WaterObject } from \"@/lib/types\"\n\ninterface MapViewProps {\n  objects: WaterObject[]\n  selectedId?: string\n  hoveredId?: string | null\n  onSelect: (object: WaterObject) => void\n  onHover: (id: string | null) => void\n  onMapClick?: () => void\n}\n\nconst tileLayers = {\n  standard: {\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    attribution: \"© OpenStreetMap contributors\",\n  },\n  satellite: {\n    url: \"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\",\n    attribution: \"Tiles © Esri — Sources: Esri, i-cubed, USDA, USGS, AEX, GeoEye\",\n  },\n  terrain: {\n    url: \"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png\",\n    attribution: \"© OpenTopoMap contributors\",\n  },\n} as const\n\ntype TileLayerKey = keyof typeof tileLayers\n\nexport function MapView({ objects, selectedId, hoveredId, onSelect, onHover, onMapClick }: MapViewProps) {\n  const mapContainerRef = useRef<HTMLDivElement | null>(null)\n  const mapRef = useRef<any>(null)\n  const tileLayerRef = useRef<any>(null)\n  const initIntervalRef = useRef<NodeJS.Timeout | null>(null)\n\n  const initializeMap = () => {\n    if (typeof window === \"undefined\" || !(window as any).L || mapRef.current || !mapContainerRef.current) return\n\n    const L = (window as any).L\n    mapRef.current = L.map(mapContainerRef.current, {\n      center: [46.0, 76.0],\n      zoom: 6,\n      zoomControl: false,\n    })\n\n    const config = tileLayers.standard\n    tileLayerRef.current = L.tileLayer(config.url, {\n      attribution: config.attribution,\n      maxZoom: 19,\n    })\n    tileLayerRef.current.addTo(mapRef.current)\n\n    ;(window as any)._leafletMap = mapRef.current\n    window.dispatchEvent(new Event(\"leaflet-map-ready\"))\n  }\n\n  useEffect(() => {\n    initializeMap()\n\n    if (!mapRef.current) {\n      initIntervalRef.current = setInterval(() => {\n        if (mapRef.current) {\n          if (initIntervalRef.current) clearInterval(initIntervalRef.current)\n        } else {\n          initializeMap()\n        }\n      }, 150)\n    }\n\n    return () => {\n      if (initIntervalRef.current) clearInterval(initIntervalRef.current)\n      if (mapRef.current) {\n        if (tileLayerRef.current) {\n          tileLayerRef.current.remove()\n          tileLayerRef.current = null\n        }\n        mapRef.current.remove()\n        if ((window as any)._leafletMap === mapRef.current) {\n          ;(window as any)._leafletMap = null\n        }\n        mapRef.current = null\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!mapRef.current || !onMapClick) return\n    const handler = () => onMapClick()\n    mapRef.current.on(\"click\", handler)\n    return () => {\n      mapRef.current?.off(\"click\", handler)\n    }\n  }, [onMapClick])\n\n  return (\n    <div className=\"w-full h-full relative bg-sky-100 rounded-3xl overflow-hidden\">\n      <div ref={mapContainerRef} className=\"absolute inset-0 z-0\" />\n      <div className=\"absolute inset-0 bg-gradient-to-b from-sky-50/20 via-transparent to-blue-50/30 pointer-events-none rounded-3xl\" />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAcA,MAAM,aAAa;IACjB,UAAU;QACR,KAAK;QACL,aAAa;IACf;IACA,WAAW;QACT,KAAK;QACL,aAAa;IACf;IACA,SAAS;QACP,KAAK;QACL,aAAa;IACf;AACF;AAIO,SAAS,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAgB;;IACrG,MAAM,kBAAkB,IAAA,uKAAM,EAAwB;IACtD,MAAM,SAAS,IAAA,uKAAM,EAAM;IAC3B,MAAM,eAAe,IAAA,uKAAM,EAAM;IACjC,MAAM,kBAAkB,IAAA,uKAAM,EAAwB;IAEtD,MAAM,gBAAgB;QACpB,IAAI,+CAAkB,eAAe,CAAC,AAAC,OAAe,CAAC,IAAI,OAAO,OAAO,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAEvG,MAAM,IAAI,AAAC,OAAe,CAAC;QAC3B,OAAO,OAAO,GAAG,EAAE,GAAG,CAAC,gBAAgB,OAAO,EAAE;YAC9C,QAAQ;gBAAC;gBAAM;aAAK;YACpB,MAAM;YACN,aAAa;QACf;QAEA,MAAM,SAAS,WAAW,QAAQ;QAClC,aAAa,OAAO,GAAG,EAAE,SAAS,CAAC,OAAO,GAAG,EAAE;YAC7C,aAAa,OAAO,WAAW;YAC/B,SAAS;QACX;QACA,aAAa,OAAO,CAAC,KAAK,CAAC,OAAO,OAAO;QAEvC,OAAe,WAAW,GAAG,OAAO,OAAO;QAC7C,OAAO,aAAa,CAAC,IAAI,MAAM;IACjC;IAEA,IAAA,0KAAS;6BAAC;YACR;YAEA,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,gBAAgB,OAAO,GAAG;yCAAY;wBACpC,IAAI,OAAO,OAAO,EAAE;4BAClB,IAAI,gBAAgB,OAAO,EAAE,cAAc,gBAAgB,OAAO;wBACpE,OAAO;4BACL;wBACF;oBACF;wCAAG;YACL;YAEA;qCAAO;oBACL,IAAI,gBAAgB,OAAO,EAAE,cAAc,gBAAgB,OAAO;oBAClE,IAAI,OAAO,OAAO,EAAE;wBAClB,IAAI,aAAa,OAAO,EAAE;4BACxB,aAAa,OAAO,CAAC,MAAM;4BAC3B,aAAa,OAAO,GAAG;wBACzB;wBACA,OAAO,OAAO,CAAC,MAAM;wBACrB,IAAI,AAAC,OAAe,WAAW,KAAK,OAAO,OAAO,EAAE;;4BAChD,OAAe,WAAW,GAAG;wBACjC;wBACA,OAAO,OAAO,GAAG;oBACnB;gBACF;;QACF;4BAAG,EAAE;IAEL,IAAA,0KAAS;6BAAC;YACR,IAAI,CAAC,OAAO,OAAO,IAAI,CAAC,YAAY;YACpC,MAAM;6CAAU,IAAM;;YACtB,OAAO,OAAO,CAAC,EAAE,CAAC,SAAS;YAC3B;qCAAO;oBACL,OAAO,OAAO,EAAE,IAAI,SAAS;gBAC/B;;QACF;4BAAG;QAAC;KAAW;IAEf,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,KAAK;gBAAiB,WAAU;;;;;;0BACrC,6LAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;GAvEgB;KAAA"}},
    {"offset": {"line": 1213, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/object-card.tsx"],"sourcesContent":["\"use client\"\n\nimport { X, MapPin, Droplets, Fish, Calendar, FileText, GitCompare, Waves, Database } from \"lucide-react\"\nimport type { WaterObject } from \"@/lib/types\"\nimport { getConditionLabel, getResourceTypeLabel } from \"@/lib/utils\"\n\ninterface ObjectCardProps {\n  object: WaterObject\n  onClose: () => void\n  onCompare: () => void\n  isInCompare: boolean\n}\n\nfunction getConditionStyles(condition: number) {\n  const styles: Record<number, { bg: string; text: string }> = {\n    1: { bg: \"bg-emerald-500\", text: \"text-emerald-600\" },\n    2: { bg: \"bg-lime-500\", text: \"text-lime-600\" },\n    3: { bg: \"bg-amber-400\", text: \"text-amber-600\" },\n    4: { bg: \"bg-orange-500\", text: \"text-orange-600\" },\n    5: { bg: \"bg-red-500\", text: \"text-red-600\" },\n  }\n  return styles[condition] || styles[3]\n}\n\nfunction ResourceTypeIcon({ type, className = \"\" }: { type: string; className?: string }) {\n  switch (type) {\n    case \"lake\":\n      return <Droplets className={className} />\n    case \"canal\":\n      return <Waves className={className} />\n    case \"reservoir\":\n      return <Database className={className} />\n    default:\n      return <Droplets className={className} />\n  }\n}\n\nexport function ObjectCard({ object, onClose, onCompare, isInCompare }: ObjectCardProps) {\n  const conditionStyles = getConditionStyles(object.condition)\n\n  return (\n    <div\n      className=\"absolute bottom-4 left-4 w-80 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden z-40\"\n      onClick={(e) => e.stopPropagation()}\n    >\n      <div className=\"relative h-36\">\n        <img\n          src={object.image || \"/placeholder.svg?height=200&width=300&query=water reservoir lake\"}\n          alt={object.name}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent\" />\n\n        <button\n          onClick={onClose}\n          className=\"absolute top-2 right-2 w-8 h-8 flex items-center justify-center bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors\"\n        >\n          <X className=\"w-4 h-4 text-gray-600\" />\n        </button>\n\n        <div className=\"absolute bottom-2 left-2 px-2 py-1 bg-white/95 rounded-md text-xs font-medium text-gray-700 flex items-center gap-1.5\">\n          <ResourceTypeIcon type={object.resourceType} className=\"w-3.5 h-3.5 text-blue-600\" />\n          {getResourceTypeLabel(object.resourceType)}\n        </div>\n      </div>\n\n      <div className=\"p-3 space-y-3\">\n        <div>\n          <div className=\"flex items-center gap-2 mb-1\">\n            <span\n              className={`w-6 h-6 rounded-full ${conditionStyles.bg} text-white text-xs font-bold flex items-center justify-center`}\n            >\n              {object.condition}\n            </span>\n            <span className={`text-sm font-semibold ${conditionStyles.text}`}>\n              {getConditionLabel(object.condition)}\n            </span>\n          </div>\n          <h3 className=\"text-base font-bold text-gray-900\">{object.name}</h3>\n          <p className=\"text-xs text-gray-500 flex items-center gap-1 mt-0.5\">\n            <MapPin className=\"w-3 h-3\" />\n            {object.region}\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-2\">\n          <div className=\"flex items-center gap-2 p-2 bg-cyan-50 rounded-lg\">\n            <Droplets className=\"w-4 h-4 text-cyan-600\" />\n            <div>\n              <p className=\"text-[10px] text-gray-500\">Вода</p>\n              <p className=\"text-xs font-medium text-gray-900\">\n                {object.waterType === \"fresh\" ? \"Пресная\" : \"Солёная\"}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2 p-2 bg-green-50 rounded-lg\">\n            <Fish className=\"w-4 h-4 text-green-600\" />\n            <div>\n              <p className=\"text-[10px] text-gray-500\">Фауна</p>\n              <p className=\"text-xs font-medium text-gray-900\">{object.hasFauna ? \"Есть\" : \"Нет\"}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2 p-2 bg-orange-50 rounded-lg\">\n            <Calendar className=\"w-4 h-4 text-orange-600\" />\n            <div>\n              <p className=\"text-[10px] text-gray-500\">Паспорт</p>\n              <p className=\"text-xs font-medium text-gray-900\">{object.passportDate}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2 p-2 bg-gray-50 rounded-lg\">\n            <MapPin className=\"w-4 h-4 text-gray-600\" />\n            <div>\n              <p className=\"text-[10px] text-gray-500\">Координаты</p>\n              <p className=\"text-xs font-medium text-gray-900\">\n                {object.coordinates.lat.toFixed(1)}°, {object.coordinates.lng.toFixed(1)}°\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2\">\n          <button className=\"flex-1 h-9 flex items-center justify-center gap-1.5 bg-blue-600 text-white text-xs font-semibold rounded-lg hover:bg-blue-700 transition-colors\">\n            <FileText className=\"w-3.5 h-3.5\" />\n            Открыть PDF\n          </button>\n          <button\n            onClick={onCompare}\n            className={`h-9 w-9 flex items-center justify-center border rounded-lg transition-colors ${\n              isInCompare\n                ? \"border-blue-500 bg-blue-50 text-blue-600\"\n                : \"border-gray-200 text-gray-500 hover:bg-gray-50\"\n            }`}\n          >\n            <GitCompare className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1658, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/stats-dashboard.tsx"],"sourcesContent":["\"use client\"\n\nimport { AlertTriangle, CheckCircle, Activity, X, Layers } from \"lucide-react\"\nimport type { WaterObject } from \"@/lib/types\"\n\ninterface StatsDashboardProps {\n  objects: WaterObject[]\n  totalObjects: number\n}\n\nexport function StatsDashboard({ objects, totalObjects }: StatsDashboardProps) {\n  const criticalCount = objects.filter((o) => o.condition >= 4).length\n  const goodCount = objects.filter((o) => o.condition <= 2).length\n  const avgCondition =\n    objects.length > 0 ? (objects.reduce((sum, o) => sum + o.condition, 0) / objects.length).toFixed(1) : \"—\"\n\n  return (\n    <div className=\"absolute top-4 left-4 z-20 flex items-center gap-3\">\n      <div className=\"h-9 px-4 bg-gradient-to-r from-gray-900 to-gray-800 text-white text-sm font-medium rounded-lg flex items-center gap-2 shadow-lg\">\n        <Layers className=\"w-4 h-4 text-cyan-400\" />\n        {objects.length} из {totalObjects} объектов\n      </div>\n\n      <div className=\"flex items-center gap-3 h-9 px-4 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-100\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-7 h-7 rounded-lg bg-red-100 flex items-center justify-center\">\n            <AlertTriangle className=\"w-4 h-4 text-red-600\" />\n          </div>\n          <div>\n            <span className=\"text-sm font-bold text-gray-900\">{criticalCount}</span>\n            <span className=\"text-xs text-gray-500 ml-1\">критич.</span>\n          </div>\n        </div>\n\n        <div className=\"w-px h-6 bg-gray-200\" />\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center\">\n            <CheckCircle className=\"w-4 h-4 text-emerald-600\" />\n          </div>\n          <div>\n            <span className=\"text-sm font-bold text-gray-900\">{goodCount}</span>\n            <span className=\"text-xs text-gray-500 ml-1\">в норме</span>\n          </div>\n        </div>\n\n        <div className=\"w-px h-6 bg-gray-200\" />\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center\">\n            <Activity className=\"w-4 h-4 text-blue-600\" />\n          </div>\n          <div>\n            <span className=\"text-sm font-bold text-gray-900\">{avgCondition}</span>\n            <span className=\"text-xs text-gray-500 ml-1\">ср. балл</span>\n          </div>\n        </div>\n      </div>\n\n      <button className=\"h-9 px-4 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-100 text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center gap-2 transition-colors\">\n        Убрать границу\n        <X className=\"w-3.5 h-3.5\" />\n      </button>\n      <button className=\"h-9 px-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg shadow-lg text-sm font-medium hover:from-blue-700 hover:to-cyan-700 transition-all\">\n        Центрировать\n      </button>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAUO,SAAS,eAAe,EAAE,OAAO,EAAE,YAAY,EAAuB;IAC3E,MAAM,gBAAgB,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,IAAI,GAAG,MAAM;IACpE,MAAM,YAAY,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,IAAI,GAAG,MAAM;IAChE,MAAM,eACJ,QAAQ,MAAM,GAAG,IAAI,CAAC,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,SAAS,EAAE,KAAK,QAAQ,MAAM,EAAE,OAAO,CAAC,KAAK;IAExG,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,mNAAM;wBAAC,WAAU;;;;;;oBACjB,QAAQ,MAAM;oBAAC;oBAAK;oBAAa;;;;;;;0BAGpC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,4OAAa;oCAAC,WAAU;;;;;;;;;;;0CAE3B,6LAAC;;kDACC,6LAAC;wCAAK,WAAU;kDAAmC;;;;;;kDACnD,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;kCAIjD,6LAAC;wBAAI,WAAU;;;;;;kCAEf,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,6OAAW;oCAAC,WAAU;;;;;;;;;;;0CAEzB,6LAAC;;kDACC,6LAAC;wCAAK,WAAU;kDAAmC;;;;;;kDACnD,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;kCAIjD,6LAAC;wBAAI,WAAU;;;;;;kCAEf,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,yNAAQ;oCAAC,WAAU;;;;;;;;;;;0CAEtB,6LAAC;;kDACC,6LAAC;wCAAK,WAAU;kDAAmC;;;;;;kDACnD,6LAAC;wCAAK,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;;;;;;;0BAKnD,6LAAC;gBAAO,WAAU;;oBAAiL;kCAEjM,6LAAC,oMAAC;wBAAC,WAAU;;;;;;;;;;;;0BAEf,6LAAC;gBAAO,WAAU;0BAA+J;;;;;;;;;;;;AAKvL;KA1DgB"}},
    {"offset": {"line": 1904, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/map/compare-panel.tsx"],"sourcesContent":["\"use client\"\n\nimport { X, FileText } from \"lucide-react\"\nimport type { WaterObject } from \"@/lib/types\"\nimport { getConditionColor, getConditionLabel, getResourceTypeLabel } from \"@/lib/utils\"\n\ninterface ComparePanelProps {\n  objects: WaterObject[]\n  onClose: () => void\n  onRemove: (id: string) => void\n}\n\nexport function ComparePanel({ objects, onClose, onRemove }: ComparePanelProps) {\n  return (\n    <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-6\" onClick={onClose}>\n      <div\n        className=\"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Сравнение ({objects.length})</h2>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-600\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-4 overflow-auto\">\n          <div className=\"grid gap-4\" style={{ gridTemplateColumns: `repeat(${objects.length}, 1fr)` }}>\n            {objects.map((obj) => (\n              <CompareCard key={obj.id} object={obj} onRemove={() => onRemove(obj.id)} />\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction CompareCard({ object, onRemove }: { object: WaterObject; onRemove: () => void }) {\n  const conditionColor = getConditionColor(object.condition)\n\n  return (\n    <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\n      {/* Image */}\n      <div className=\"relative h-32\">\n        <img\n          src={object.image || \"/placeholder.svg?height=150&width=200&query=water lake\"}\n          alt={object.name}\n          className=\"w-full h-full object-cover\"\n        />\n        <button\n          onClick={onRemove}\n          className=\"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-white rounded-full shadow hover:bg-gray-50 transition-colors\"\n        >\n          <X className=\"w-3.5 h-3.5 text-gray-600\" />\n        </button>\n        <div className={`absolute bottom-2 left-2 px-2 py-0.5 rounded text-xs font-bold text-white ${conditionColor}`}>\n          {object.condition}\n        </div>\n      </div>\n\n      {/* Info */}\n      <div className=\"p-3 space-y-2\">\n        <div>\n          <h3 className=\"font-semibold text-sm text-gray-900 truncate\">{object.name}</h3>\n          <p className=\"text-xs text-gray-500 truncate\">{object.region}</p>\n        </div>\n\n        <div className=\"space-y-1.5 text-xs\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">Тип:</span>\n            <span className=\"font-medium\">{getResourceTypeLabel(object.resourceType)}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">Вода:</span>\n            <span className=\"font-medium\">{object.waterType === \"fresh\" ? \"Пресная\" : \"Непресная\"}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">Фауна:</span>\n            <span className=\"font-medium\">{object.hasFauna ? \"Есть\" : \"Нет\"}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">Состояние:</span>\n            <span\n              className={`font-medium ${\n                object.condition <= 2 ? \"text-emerald-600\" : object.condition === 3 ? \"text-amber-600\" : \"text-red-600\"\n              }`}\n            >\n              {getConditionLabel(object.condition)}\n            </span>\n          </div>\n        </div>\n\n        <button className=\"w-full h-8 flex items-center justify-center gap-1.5 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors\">\n          <FileText className=\"w-3.5 h-3.5\" />\n          PDF\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAEA;AAJA;;;;AAYO,SAAS,aAAa,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAqB;IAC5E,qBACE,6LAAC;QAAI,WAAU;QAAsE,SAAS;kBAC5F,cAAA,6LAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAGjC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;;gCAAsC;gCAAY,QAAQ,MAAM;gCAAC;;;;;;;sCAC/E,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;wBAAa,OAAO;4BAAE,qBAAqB,CAAC,OAAO,EAAE,QAAQ,MAAM,CAAC,MAAM,CAAC;wBAAC;kCACxF,QAAQ,GAAG,CAAC,CAAC,oBACZ,6LAAC;gCAAyB,QAAQ;gCAAK,UAAU,IAAM,SAAS,IAAI,EAAE;+BAApD,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtC;KA7BgB;AA+BhB,SAAS,YAAY,EAAE,MAAM,EAAE,QAAQ,EAAiD;IACtF,MAAM,iBAAiB,IAAA,oIAAiB,EAAC,OAAO,SAAS;IAEzD,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,KAAK,OAAO,KAAK,IAAI;wBACrB,KAAK,OAAO,IAAI;wBAChB,WAAU;;;;;;kCAEZ,6LAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,6LAAC,oMAAC;4BAAC,WAAU;;;;;;;;;;;kCAEf,6LAAC;wBAAI,WAAW,CAAC,0EAA0E,EAAE,gBAAgB;kCAC1G,OAAO,SAAS;;;;;;;;;;;;0BAKrB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAgD,OAAO,IAAI;;;;;;0CACzE,6LAAC;gCAAE,WAAU;0CAAkC,OAAO,MAAM;;;;;;;;;;;;kCAG9D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,6LAAC;wCAAK,WAAU;kDAAe,IAAA,uIAAoB,EAAC,OAAO,YAAY;;;;;;;;;;;;0CAEzE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,6LAAC;wCAAK,WAAU;kDAAe,OAAO,SAAS,KAAK,UAAU,YAAY;;;;;;;;;;;;0CAE5E,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,6LAAC;wCAAK,WAAU;kDAAe,OAAO,QAAQ,GAAG,SAAS;;;;;;;;;;;;0CAE5D,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;kDAChC,6LAAC;wCACC,WAAW,CAAC,YAAY,EACtB,OAAO,SAAS,IAAI,IAAI,qBAAqB,OAAO,SAAS,KAAK,IAAI,mBAAmB,gBACzF;kDAED,IAAA,oIAAiB,EAAC,OAAO,SAAS;;;;;;;;;;;;;;;;;;kCAKzC,6LAAC;wBAAO,WAAU;;0CAChB,6LAAC,6NAAQ;gCAAC,WAAU;;;;;;4BAAgB;;;;;;;;;;;;;;;;;;;AAM9C;MA9DS"}},
    {"offset": {"line": 2221, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/lib/data.ts"],"sourcesContent":["import type { WaterObject } from \"./types\"\n\nexport const waterObjects: WaterObject[] = [\n  {\n    id: \"1\",\n    name: \"Озеро Балхаш\",\n    region: \"Алматинская область\",\n    resourceType: \"lake\",\n    waterType: \"saline\",\n    hasFauna: true,\n    passportDate: \"2024-03-12\",\n    condition: 3,\n    priority: \"medium\",\n    coordinates: { lat: 46.1, lng: 74.0 },\n    position: { x: 58, y: 34 },\n    image: \"/kushkakul-lake-jizzakh-green-nature.jpg\",\n  },\n  {\n    id: \"2\",\n    name: \"Озеро Алаколь\",\n    region: \"Алматинская область\",\n    resourceType: \"lake\",\n    waterType: \"saline\",\n    hasFauna: true,\n    passportDate: \"2023-11-05\",\n    condition: 2,\n    priority: \"low\",\n    coordinates: { lat: 46.2, lng: 81.6 },\n    position: { x: 78, y: 30 },\n    image: \"/aydar-lake-desert-uzbekistan.jpg\",\n  },\n  {\n    id: \"3\",\n    name: \"Маркаколь\",\n    region: \"Восточно-Казахстанская область\",\n    resourceType: \"lake\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2024-01-28\",\n    condition: 2,\n    priority: \"low\",\n    coordinates: { lat: 48.7, lng: 85.7 },\n    position: { x: 88, y: 18 },\n    image: \"/charvak-reservoir-mountains-blue-water.jpg\",\n  },\n  {\n    id: \"4\",\n    name: \"Водохранилище Капчагай\",\n    region: \"Алматинская область\",\n    resourceType: \"reservoir\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2024-04-18\",\n    condition: 4,\n    priority: \"high\",\n    coordinates: { lat: 43.85, lng: 77.16 },\n    position: { x: 66, y: 42 },\n    image: \"/andijan-reservoir-dam-water.jpg\",\n  },\n  {\n    id: \"5\",\n    name: \"Водохранилище Бухтарма\",\n    region: \"Восточно-Казахстанская область\",\n    resourceType: \"reservoir\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2023-09-07\",\n    condition: 3,\n    priority: \"medium\",\n    coordinates: { lat: 49.6, lng: 83.0 },\n    position: { x: 82, y: 16 },\n    image: \"/kampyrkalin-reservoir-blue-water.jpg\",\n  },\n  {\n    id: \"6\",\n    name: \"Озеро Тенгиз\",\n    region: \"Акмолинская область\",\n    resourceType: \"lake\",\n    waterType: \"saline\",\n    hasFauna: false,\n    passportDate: \"2023-12-15\",\n    condition: 5,\n    priority: \"high\",\n    coordinates: { lat: 50.5, lng: 69.3 },\n    position: { x: 48, y: 18 },\n    image: \"/aral-sea-dried-ships-desert.jpg\",\n  },\n  {\n    id: \"7\",\n    name: \"Канал Иртыш-Караганда\",\n    region: \"Карагандинская область\",\n    resourceType: \"canal\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2024-02-02\",\n    condition: 1,\n    priority: \"low\",\n    coordinates: { lat: 49.8, lng: 73.1 },\n    position: { x: 55, y: 22 },\n    image: \"/fergana-canal-irrigation-water.jpg\",\n  },\n  {\n    id: \"8\",\n    name: \"Канал Аrys-Туркестан\",\n    region: \"Туркестанская область\",\n    resourceType: \"canal\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2024-05-30\",\n    condition: 2,\n    priority: \"low\",\n    coordinates: { lat: 42.5, lng: 69.0 },\n    position: { x: 48, y: 60 },\n    image: \"/amu-darya-river-khorezm.jpg\",\n  },\n  {\n    id: \"9\",\n    name: \"Шардара\",\n    region: \"Туркестанская область\",\n    resourceType: \"reservoir\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2024-06-18\",\n    condition: 4,\n    priority: \"high\",\n    coordinates: { lat: 41.3, lng: 68.3 },\n    position: { x: 44, y: 70 },\n    image: \"/surkhan-reservoir-mountains-green.jpg\",\n  },\n  {\n    id: \"10\",\n    name: \"Озеро Сасыкколь\",\n    region: \"Алматинская область\",\n    resourceType: \"lake\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2023-10-21\",\n    condition: 3,\n    priority: \"medium\",\n    coordinates: { lat: 45.5, lng: 78.5 },\n    position: { x: 69, y: 32 },\n    image: \"/tudakul-reservoir-dried-lake.jpg\",\n  },\n  {\n    id: \"11\",\n    name: \"Озеро Иссык\",\n    region: \"Алматинская область\",\n    resourceType: \"lake\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2024-07-05\",\n    condition: 1,\n    priority: \"low\",\n    coordinates: { lat: 43.35, lng: 77.17 },\n    position: { x: 66, y: 48 },\n    image: \"/charvak-reservoir-mountains-blue-water.jpg\",\n  },\n  {\n    id: \"12\",\n    name: \"Саумалколь\",\n    region: \"Северо-Казахстанская область\",\n    resourceType: \"lake\",\n    waterType: \"fresh\",\n    hasFauna: true,\n    passportDate: \"2023-08-19\",\n    condition: 2,\n    priority: \"low\",\n    coordinates: { lat: 53.2, lng: 69.6 },\n    position: { x: 49, y: 10 },\n    image: \"/kushkakul-lake-jizzakh-region-green-nature-birds.jpg\",\n  },\n]\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2474, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/frontend/mapMarkers.js"],"sourcesContent":["export function renderMarkers(map, objects = []) {\r\n  if (typeof window === \"undefined\" || typeof L === \"undefined\" || !map) {\r\n    return\r\n  }\r\n\r\n  if (window._markers && Array.isArray(window._markers)) {\r\n    window._markers.forEach((marker) => map.removeLayer(marker))\r\n  }\r\n  window._markers = []\r\n\r\n  const colors = {\r\n    1: \"#00cc44\",\r\n    2: \"#66ff66\",\r\n    3: \"#ffcc00\",\r\n    4: \"#ff6600\",\r\n    5: \"#ff0000\",\r\n  }\r\n\r\n  const markers = []\r\n\r\n  objects.forEach((obj) => {\r\n    const lat = Number(obj.latitude ?? obj.lat ?? obj.coordinates?.lat)\r\n    const lng = Number(obj.longitude ?? obj.lng ?? obj.coordinates?.lng)\r\n    if (Number.isNaN(lat) || Number.isNaN(lng)) return\r\n\r\n    const color = colors[obj.technical_condition] || \"#999999\"\r\n\r\n    const icon = L.divIcon({\r\n      className: \"\",\r\n      html: `\r\n        <div style=\"\r\n          width: 20px;\r\n          height: 20px;\r\n          background: ${color};\r\n          border-radius: 50%;\r\n          border: 2px solid #fff;\r\n          box-shadow: 0 2px 6px rgba(0,0,0,0.35);\r\n        \"></div>\r\n      `,\r\n      iconSize: [20, 20],\r\n      iconAnchor: [10, 10],\r\n    })\r\n\r\n    const marker = L.marker([lat, lng], { icon }).addTo(map)\r\n    const region = obj.region ?? \"—\"\r\n    const type = obj.resource_type ?? obj.resourceType ?? \"—\"\r\n    const pdfLink = obj.pdf_url\r\n      ? `<a href=\"${obj.pdf_url}\" target=\"_blank\" rel=\"noopener\">PDF паспорт</a>`\r\n      : \"\"\r\n\r\n    marker.bindPopup(\r\n      `\r\n        <div class=\"csv-marker-popup\">\r\n          <strong>${obj.name ?? \"Объект\"}</strong><br/>\r\n          Регион: ${region}<br/>\r\n          Тип: ${type}<br/>\r\n          ${pdfLink}\r\n        </div>\r\n      `,\r\n    )\r\n\r\n    window._markers.push(marker)\r\n    markers.push(marker)\r\n  })\r\n\r\n  if (markers.length) {\r\n    const bounds = L.latLngBounds(markers.map((m) => m.getLatLng()))\r\n    map.fitBounds(bounds, { padding: [40, 40] })\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAO,SAAS,cAAc,GAAG,EAAE,UAAU,EAAE;IAC7C,IAAI,+CAAkB,eAAe,OAAO,MAAM,eAAe,CAAC,KAAK;QACrE;IACF;IAEA,IAAI,OAAO,QAAQ,IAAI,MAAM,OAAO,CAAC,OAAO,QAAQ,GAAG;QACrD,OAAO,QAAQ,CAAC,OAAO,CAAC,CAAC,SAAW,IAAI,WAAW,CAAC;IACtD;IACA,OAAO,QAAQ,GAAG,EAAE;IAEpB,MAAM,SAAS;QACb,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;IACL;IAEA,MAAM,UAAU,EAAE;IAElB,QAAQ,OAAO,CAAC,CAAC;QACf,MAAM,MAAM,OAAO,IAAI,QAAQ,IAAI,IAAI,GAAG,IAAI,IAAI,WAAW,EAAE;QAC/D,MAAM,MAAM,OAAO,IAAI,SAAS,IAAI,IAAI,GAAG,IAAI,IAAI,WAAW,EAAE;QAChE,IAAI,OAAO,KAAK,CAAC,QAAQ,OAAO,KAAK,CAAC,MAAM;QAE5C,MAAM,QAAQ,MAAM,CAAC,IAAI,mBAAmB,CAAC,IAAI;QAEjD,MAAM,OAAO,EAAE,OAAO,CAAC;YACrB,WAAW;YACX,MAAM,CAAC;;;;sBAIS,EAAE,MAAM;;;;;MAKxB,CAAC;YACD,UAAU;gBAAC;gBAAI;aAAG;YAClB,YAAY;gBAAC;gBAAI;aAAG;QACtB;QAEA,MAAM,SAAS,EAAE,MAAM,CAAC;YAAC;YAAK;SAAI,EAAE;YAAE;QAAK,GAAG,KAAK,CAAC;QACpD,MAAM,SAAS,IAAI,MAAM,IAAI;QAC7B,MAAM,OAAO,IAAI,aAAa,IAAI,IAAI,YAAY,IAAI;QACtD,MAAM,UAAU,IAAI,OAAO,GACvB,CAAC,SAAS,EAAE,IAAI,OAAO,CAAC,gDAAgD,CAAC,GACzE;QAEJ,OAAO,SAAS,CACd,CAAC;;kBAEW,EAAE,IAAI,IAAI,IAAI,SAAS;kBACvB,EAAE,OAAO;eACZ,EAAE,KAAK;UACZ,EAAE,QAAQ;;MAEd,CAAC;QAGH,OAAO,QAAQ,CAAC,IAAI,CAAC;QACrB,QAAQ,IAAI,CAAC;IACf;IAEA,IAAI,QAAQ,MAAM,EAAE;QAClB,MAAM,SAAS,EAAE,YAAY,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAM,EAAE,SAAS;QAC5D,IAAI,SAAS,CAAC,QAAQ;YAAE,SAAS;gBAAC;gBAAI;aAAG;QAAC;IAC5C;AACF"}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juven/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/GidroAtlas/components/gidro-atlas-map.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useMemo, useEffect, useCallback, useRef } from \"react\"\nimport { Header } from \"./map/header\"\nimport { FilterBar } from \"./map/filter-bar\"\nimport { ObjectList } from \"./map/object-list\"\nimport { MapView } from \"./map/map-view\"\nimport { ObjectCard } from \"./map/object-card\"\nimport { StatsDashboard } from \"./map/stats-dashboard\"\nimport { ComparePanel } from \"./map/compare-panel\"\nimport type { WaterObject, Filters, SortOption } from \"@/lib/types\"\nimport { waterObjects } from \"@/lib/data\"\nimport { renderMarkers } from \"@/frontend/mapMarkers\"\n\nexport function GidroAtlasMap() {\n  const [selectedObject, setSelectedObject] = useState<WaterObject | null>(null)\n  const [hoveredId, setHoveredId] = useState<string | null>(null)\n  const [compareObjects, setCompareObjects] = useState<WaterObject[]>([])\n  const [showCompare, setShowCompare] = useState(false)\n  const [sortBy, setSortBy] = useState<SortOption>(\"dangerous\")\n  const [filters, setFilters] = useState<Filters>({\n    region: \"\",\n    resourceType: \"\",\n    waterType: \"\",\n    hasFauna: null,\n    passportDateFrom: \"\",\n    passportDateTo: \"\",\n    condition: null,\n    priority: \"\",\n    criticalOnly: false,\n  })\n\n  const filteredObjects = useMemo(() => {\n    let result = waterObjects.filter((obj) => {\n      if (filters.region && obj.region !== filters.region) return false\n      if (filters.resourceType && obj.resourceType !== filters.resourceType) return false\n      if (filters.waterType && obj.waterType !== filters.waterType) return false\n      if (filters.hasFauna !== null && obj.hasFauna !== filters.hasFauna) return false\n      if (filters.condition !== null && obj.condition !== filters.condition) return false\n      if (filters.criticalOnly && obj.condition < 4) return false\n      if (filters.priority && obj.priority !== filters.priority) return false\n      return true\n    })\n\n    result = [...result].sort((a, b) => {\n      switch (sortBy) {\n        case \"dangerous\":\n          return b.condition - a.condition\n        case \"safe\":\n          return a.condition - b.condition\n        case \"oldest\":\n          return new Date(a.passportDate).getTime() - new Date(b.passportDate).getTime()\n        case \"newest\":\n          return new Date(b.passportDate).getTime() - new Date(a.passportDate).getTime()\n        default:\n          return 0\n      }\n    })\n\n    return result\n  }, [filters, sortBy])\n\n  const [csvMarkers, setCsvMarkers] = useState<any[]>([])\n  const [uploadStatus, setUploadStatus] = useState<string | null>(null)\n  const [uploadError, setUploadError] = useState<string | null>(null)\n  const [isUploading, setIsUploading] = useState(false)\n  const fileInputRef = useRef<HTMLInputElement | null>(null)\n\n  const toggleCompare = (obj: WaterObject) => {\n    setCompareObjects((prev) => {\n      const exists = prev.find((o) => o.id === obj.id)\n      if (exists) {\n        return prev.filter((o) => o.id !== obj.id)\n      }\n      if (prev.length >= 3) return prev\n      return [...prev, obj]\n    })\n  }\n\n  const handleMapClick = () => {\n    setSelectedObject(null)\n  }\n\n  const updateLeafletMarkers = useCallback(() => {\n    if (typeof window === \"undefined\") return\n    const map = (window as any)._leafletMap\n    if (!map) return\n    renderMarkers(map, csvMarkers)\n  }, [csvMarkers])\n\n  useEffect(() => {\n    updateLeafletMarkers()\n  }, [updateLeafletMarkers])\n\n  useEffect(() => {\n    const handler = () => updateLeafletMarkers()\n    window.addEventListener(\"leaflet-map-ready\", handler)\n    return () => window.removeEventListener(\"leaflet-map-ready\", handler)\n  }, [updateLeafletMarkers])\n\n  const splitCsvLine = (line: string) => {\n    const result: string[] = []\n    let current = \"\"\n    let inQuotes = false\n    for (let i = 0; i < line.length; i++) {\n      const char = line[i]\n      if (char === '\"') {\n        inQuotes = !inQuotes\n        continue\n      }\n      if (char === \",\" && !inQuotes) {\n        result.push(current.trim())\n        current = \"\"\n        continue\n      }\n      current += char\n    }\n    if (current.length || line.endsWith(\",\")) {\n      result.push(current.trim())\n    }\n    return result\n  }\n\n  const handleCsvFile = async (file: File) => {\n    setIsUploading(true)\n    setUploadStatus(null)\n    setUploadError(null)\n    try {\n      const text = await file.text()\n      const lines = text.split(/\\r?\\n/).map((line) => line.trim()).filter(Boolean)\n      if (lines.length < 2) {\n        throw new Error(\"CSV пустой или содержит только заголовок.\")\n      }\n      const headers = splitCsvLine(lines[0]).map((h) => h.replace(/^\"|\"$/g, \"\"))\n      const rows = lines.slice(1).map((line) => {\n        const values = splitCsvLine(line).map((v) => v.replace(/^\"|\"$/g, \"\"))\n        const entry: Record<string, string> = {}\n        headers.forEach((header, idx) => {\n          entry[header] = values[idx] ?? \"\"\n        })\n        return entry\n      })\n\n      const mapped = rows\n        .map((row) => ({\n          name: row.name || row.Name || \"Неизвестный объект\",\n          region: row.region || row.Region || \"\",\n          resource_type: row.resource_type || row.resourceType || row.ResourceType || \"\",\n          latitude: parseFloat(row.latitude || row.lat || row.Latitude || row.Lat),\n          longitude: parseFloat(row.longitude || row.lon || row.Longitude || row.Lon),\n          pdf_url: row.pdf_url || row.passport_url || row.Passport || \"\",\n          technical_condition: Number(row.technical_condition || row.condition || row.Condition || 0) || undefined,\n        }))\n        .filter((row) => !Number.isNaN(row.latitude) && !Number.isNaN(row.longitude))\n\n      setCsvMarkers(mapped)\n      setUploadStatus(`Загружено ${mapped.length} объектов`)\n      if (!mapped.length) {\n        setUploadError(\"В CSV нет валидных координат.\")\n      }\n    } catch (error) {\n      console.error(error)\n      setCsvMarkers([])\n      setUploadError((error as Error).message || \"Не удалось прочитать CSV.\")\n    } finally {\n      setIsUploading(false)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\"\n      }\n    }\n  }\n\n  const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0]\n    if (!file) return\n    await handleCsvFile(file)\n  }\n\n  const requestCsvUpload = () => {\n    fileInputRef.current?.click()\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-50\">\n      <Header onUploadCsv={requestCsvUpload} isUploading={isUploading} />\n      {(uploadStatus || uploadError) && (\n        <div className=\"px-4 pt-2 text-xs\">\n          {uploadStatus && !uploadError && <span className=\"text-gray-600\">{uploadStatus}</span>}\n          {uploadError && <span className=\"text-red-600\">{uploadError}</span>}\n        </div>\n      )}\n      <FilterBar\n        filters={filters}\n        onFiltersChange={setFilters}\n        onShowCritical={() => setFilters((f) => ({ ...f, criticalOnly: !f.criticalOnly }))}\n      />\n\n      <div className=\"flex-1 flex overflow-hidden\">\n        <input ref={fileInputRef} type=\"file\" accept=\".csv\" className=\"hidden\" onChange={handleFileChange} />\n        <div className=\"flex-1 relative\">\n          <MapView\n            objects={filteredObjects}\n            selectedId={selectedObject?.id}\n            hoveredId={hoveredId}\n            onSelect={setSelectedObject}\n            onHover={setHoveredId}\n            onMapClick={handleMapClick}\n          />\n\n          {/* Мини-дашборд */}\n          <StatsDashboard objects={filteredObjects} totalObjects={waterObjects.length} />\n\n          {/* Карточка объекта */}\n          {selectedObject && (\n            <ObjectCard\n              object={selectedObject}\n              onClose={() => setSelectedObject(null)}\n              onCompare={() => toggleCompare(selectedObject)}\n              isInCompare={compareObjects.some((o) => o.id === selectedObject.id)}\n            />\n          )}\n        </div>\n\n        <ObjectList\n          objects={filteredObjects}\n          selectedId={selectedObject?.id}\n          hoveredId={hoveredId}\n          onSelect={setSelectedObject}\n          onHover={setHoveredId}\n          sortBy={sortBy}\n          onSortChange={setSortBy}\n          compareObjects={compareObjects}\n          onToggleCompare={toggleCompare}\n          onOpenCompare={() => setShowCompare(true)}\n        />\n      </div>\n\n      {/* Панель сравнения */}\n      {showCompare && compareObjects.length > 0 && (\n        <ComparePanel\n          objects={compareObjects}\n          onClose={() => setShowCompare(false)}\n          onRemove={(id) => setCompareObjects((prev) => prev.filter((o) => o.id !== id))}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}